test_tool_users = ["{{ test_tool_users | join('", "') }}"]
test_tool_label = "test"

def hide_test_tools(context, tool):
    """
    hide tools with 'test' tag from all but selected_users
    """
    if hasattr(tool, 'labels') and test_tool_label in tool.labels:
        user = context.trans.user
        return user is not None and user.email in test_tool_users
    return True

def restrict_alphafold(context, tool):
    """
    Only let GA team and alphafold beta users see alphafold
    """
    if tool.id.startswith('toolshed.g2.bx.psu.edu/repos/galaxy-australia/alphafold2/alphafold'):
        user = context.trans.user
        return user is not None and (user.email in test_tool_users or 'Alphafold' in [role.name for role in user.all_roles() if not role.deleted])
    return True
